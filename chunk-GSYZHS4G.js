import{F as dt,H as pt,I as Ve,J as ht,O as ie,T as he,Y as ze,Z as q,a as u,b as T,bb as D,cb as K,da as gt,db as $e,ea as se,i as ut,l as ft,n as mt,u as lt}from"./chunk-4UFCJMXR.js";function un(e){return{name:e.withName()}}function xt(e){return()=>un(e)}function ge(e,t){let o=[];if(!t)return()=>o;for(let r=0;r<t;r++)o.push(e());return()=>o}var fn=0,mn=Date.now();function g(){return`hwa-id-${mn}-${++fn}`}function bt(){return{tokenType:"DO",id:g()}}function be(e){for(let t=e.length-1;t>0;t--){let o=Math.floor(Math.random()*(t+1));[e[t],e[o]]=[e[o],e[t]]}return e}function ln(e){return{name:e.withName(),connections:e.withConnections(),investigators:e.withInverstigators(),monsters:e.withMonsters(),doom:e.withDoom(),unstable:e.withUnstable()}}function dn(e){return()=>ln(e)}function yt(...e){return()=>e.map(t=>t())}function pn(e){let t=new Map;return x(e).forEach(o=>{t.set(o.name,o)}),t}function x(e){let t=e.streets.map(r=>r.location),o=e.districts.flatMap(r=>r.locations);return[...t,...o]}function R(e,t){let o=x(e).find(r=>r.name===t);if(!o)throw new Error(`Could not find location ${t}`);return o}function vt(e,t){let o=x(e).find(r=>r.monsters.map(a=>a.id).includes(t.id));if(!o)throw new Error(`Could not find ${t.name} location`);return o}function Tt(e){return x(e).filter(t=>t.unstable)}function ce(e,t){if(!t)throw new Error("There is no valid investigator");let o=x(e).find(r=>r.investigators.map(a=>a.name).includes(t.name));if(!o)throw new Error(`Could not find ${t.name} location`);return o}function ye(e){let t=pn(e.board),o=[],r=new Set,a=new Map;for(o.push(e.startName),r.add(e.startName);o.length>0;){let n=o.shift(),s=t.get(n);if(e.stopCondition?.(s)&&(e.endName=n),n===e.endName){let i=[],c=e.endName;for(;c;)i.unshift(c),c=a.get(c);return i}be(s.connections).forEach(i=>{!r.has(i)&&(!e.withCondition||e.withCondition(t.get(i)))&&(r.add(i),a.set(i,n),o.push(i))})}return[]}function p(e){return dn({withName:()=>e.name,withConnections:()=>e.connections,withInverstigators:()=>[],withMonsters:()=>e.initialMonsters??[],withDoom:ge(bt,e.initialDoom),withUnstable:()=>!!e.unstable})()}function wt(e,t){return p({name:"Police Station",connections:["Ribb's Roadhouse","Velma's Dinner",...e()],initialDoom:t?.doom?.(),initialMonsters:t?.monsters?.(),unstable:t?.unstable?.()})}function St(e,t){return p({name:"Velma's Dinner",connections:["Police Station","Ribb's Roadhouse",...e()],initialDoom:t?.doom?.(),initialMonsters:t?.monsters?.(),unstable:t?.unstable?.()})}function Lt(e,t){return p({name:"Ribb's Roadhouse",connections:["Police Station","Velma's Dinner",...e()],initialDoom:t?.doom?.(),initialMonsters:t?.monsters?.(),unstable:t?.unstable?.()})}function kt(e,t){return p({name:"Arkham Advertiser",connections:["Curiositie Shoppe","Train Station",...e()],initialDoom:t?.doom?.(),initialMonsters:t?.monsters?.(),unstable:t?.unstable?.()})}function At(e,t){return p({name:"Curiositie Shoppe",connections:["Arkham Advertiser","Train Station",...e()],initialDoom:t?.doom?.(),initialMonsters:t?.monsters?.(),unstable:t?.unstable?.()})}function Ct(e,t){return p({name:"Train Station",connections:["Curiositie Shoppe","Arkham Advertiser",...e()],initialDoom:t?.doom?.(),initialMonsters:t?.monsters?.(),unstable:t?.unstable?.()})}function It(e,t){return p({name:"Independence Square",connections:["Arkham Asylum","La Bella Luna",...e()],initialDoom:t?.doom?.(),initialMonsters:t?.monsters?.(),unstable:t?.unstable?.()})}function Nt(e,t){return p({name:"Arkham Asylum",connections:["Independence Square","La Bella Luna",...e()],initialDoom:t?.doom?.(),initialMonsters:t?.monsters?.(),unstable:t?.unstable?.()})}function Mt(e,t){return p({name:"La Bella Luna",connections:["Arkham Asylum","Independence Square",...e()],initialDoom:t?.doom?.(),initialMonsters:t?.monsters?.(),unstable:t?.unstable?.()})}function Dt(e,t){return p({name:"Unvisited Isle",connections:["River Docks","Tic-Toc Club",...e()],initialDoom:t?.doom?.(),initialMonsters:t?.monsters?.(),unstable:t?.unstable?.()})}function Rt(e,t){return p({name:"River Docks",connections:["Unvisited Isle","Tic-Toc Club",...e()],initialDoom:t?.doom?.(),initialMonsters:t?.monsters?.(),unstable:t?.unstable?.()})}function jt(e,t){return p({name:"Tic-Toc Club",connections:["River Docks","Unvisited Isle",...e()],initialDoom:t?.doom?.(),initialMonsters:t?.monsters?.(),unstable:t?.unstable?.()})}function Et(e,t){return p({name:"Black Cave",connections:["General Store","Graveyard",...e()],initialDoom:t?.doom?.(),initialMonsters:t?.monsters?.(),unstable:t?.unstable?.()})}function _t(e,t){return p({name:"General Store",connections:["Black Cave","Graveyard",...e()],initialDoom:t?.doom?.(),initialMonsters:t?.monsters?.(),unstable:t?.unstable?.()})}function Ot(e,t){return p({name:"Graveyard",connections:["General Store","Black Cave",...e()],initialDoom:t?.doom?.(),initialMonsters:t?.monsters?.(),unstable:t?.unstable?.()})}function j(...e){return()=>e.map(t=>t())}function Pt(e,t){if(t>e.length&&(t=e.length),t===0)return[];if(t===e.length)return e;let o=[...e],r=[];for(let a=0;a<t;a++){let n=Math.floor(Math.random()*o.length);r.push(o[n]),o.splice(n,1)}return r}function gn(e){return{cardType:"LO",locationType:"N",id:e.withId(),neighbourhoodName:e.withNeighbourhoodName(),encounters:e.withEncounters()}}function xn(e){return()=>gn(e)}function Bt(){return xn({withId:()=>1,withNeighbourhoodName:()=>"Northside",withEncounters:()=>new Map})()}function vn(e){return{mapTileType:"N",name:e.withName(),locations:e.withLocations(),clues:e.withClues(),neighborhoodDeck:e.withNeighborhoodDeck()}}function Tn(e){return()=>vn(e)}function Ht(...e){return()=>e.map(t=>t())}function ue(e){return Tn({withName:()=>e.name,withLocations:yt(...e.locations),withClues:()=>[],withNeighborhoodDeck:j(...e.neighborhoodDeck)})()}function Wt(e,t){return ue({name:"Northside",locations:[()=>kt(e.arkhamAdvertiser,{doom:t?.doom?.arkhamAdvertiser,monsters:t?.monsters?.arkhamAdvertiser,unstable:t?.unstable?.arkhamAdvertiser}),()=>At(e.curiositieShoppe,{doom:t?.doom?.curiositieShoppe,monsters:t?.monsters?.curiositieShoppe,unstable:t?.unstable?.curiositieShoppe}),()=>Ct(e.trainStation,{doom:t?.doom?.trainStation,monsters:t?.monsters?.trainStation,unstable:t?.unstable?.trainStation})],neighborhoodDeck:[Bt]})}function Gt(e,t){return ue({name:"Easttown",locations:[()=>Lt(e.hibbsRoadhouse,{doom:t?.doom?.hibbsRoadhouse,monsters:t?.monsters?.hibbsRoadhouse,unstable:t?.unstable?.hibbsRoadhouse}),()=>St(e.velmasDinner,{doom:t?.doom?.velmasDinner,monsters:t?.monsters?.velmasDinner,unstable:t?.unstable?.velmasDinner}),()=>wt(e.policeStation,{doom:t?.doom?.policeStation,monsters:t?.monsters?.policeStation,unstable:t?.unstable?.policeStation})],neighborhoodDeck:[]})}function Ut(e,t){return ue({name:"Downtown",locations:[()=>It(e.independenceSquare,{doom:t?.doom?.independenceSquare,monsters:t?.monsters?.independenceSquare,unstable:t?.unstable?.independenceSquare}),()=>Nt(e.arkhamAsylum,{doom:t?.doom?.arkhamAsylum,monsters:t?.monsters?.arkhamAsylum,unstable:t?.unstable?.arkhamAsylum}),()=>Mt(e.laBellaLuna,{doom:t?.doom?.laBellaLuna,monsters:t?.monsters?.laBellaLuna,unstable:t?.unstable?.laBellaLuna})],neighborhoodDeck:[]})}function Ft(e,t){return ue({name:"Merchant District",locations:[()=>Dt(e.unvisitedIsle,{doom:t?.doom?.unvisitedIsle,monsters:t?.monsters?.unvisitedIsle,unstable:t?.unstable?.unvisitedIsle}),()=>Rt(e.riverDocks,{doom:t?.doom?.riverDocks,monsters:t?.monsters?.riverDocks,unstable:t?.unstable?.riverDocks}),()=>jt(e.ticTocClub,{doom:t?.doom?.ticTocClub,monsters:t?.monsters?.ticTocClub,unstable:t?.unstable?.ticTocClub})],neighborhoodDeck:[]})}function qt(e,t){return ue({name:"Rivertown",locations:[()=>Et(e.blackCave,{doom:t?.doom?.blackCave,monsters:t?.monsters?.blackCave,unstable:t?.unstable?.blackCave}),()=>_t(e.generalStore,{doom:t?.doom?.generalStore,monsters:t?.monsters?.generalStore,unstable:t?.unstable?.generalStore}),()=>Ot(e.graveyard,{doom:t?.doom?.graveyard,monsters:t?.monsters?.graveyard,unstable:t?.unstable?.graveyard})],neighborhoodDeck:[]})}var wn=typeof global=="object"&&global&&global.Object===Object&&global,Te=wn;var Sn=typeof self=="object"&&self&&self.Object===Object&&self,Ln=Te||Sn||Function("return this")(),d=Ln;var kn=d.Symbol,k=kn;var Kt=Object.prototype,An=Kt.hasOwnProperty,Cn=Kt.toString,fe=k?k.toStringTag:void 0;function In(e){var t=An.call(e,fe),o=e[fe];try{e[fe]=void 0;var r=!0}catch{}var a=Cn.call(e);return r&&(t?e[fe]=o:delete e[fe]),a}var Vt=In;var Nn=Object.prototype,Mn=Nn.toString;function Dn(e){return Mn.call(e)}var zt=Dn;var Rn="[object Null]",jn="[object Undefined]",$t=k?k.toStringTag:void 0;function En(e){return e==null?e===void 0?jn:Rn:$t&&$t in Object(e)?Vt(e):zt(e)}var A=En;function _n(e){return e!=null&&typeof e=="object"}var S=_n;var On=Array.isArray,V=On;function Pn(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var L=Pn;var Bn="[object AsyncFunction]",Hn="[object Function]",Wn="[object GeneratorFunction]",Gn="[object Proxy]";function Un(e){if(!L(e))return!1;var t=A(e);return t==Hn||t==Wn||t==Bn||t==Gn}var we=Un;var Fn=d["__core-js_shared__"],Se=Fn;var Yt=function(){var e=/[^.]+$/.exec(Se&&Se.keys&&Se.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function qn(e){return!!Yt&&Yt in e}var Jt=qn;var Kn=Function.prototype,Vn=Kn.toString;function zn(e){if(e!=null){try{return Vn.call(e)}catch{}try{return e+""}catch{}}return""}var C=zn;var $n=/[\\^$.*+?()[\]{}|]/g,Yn=/^\[object .+?Constructor\]$/,Jn=Function.prototype,Xn=Object.prototype,Zn=Jn.toString,Qn=Xn.hasOwnProperty,ea=RegExp("^"+Zn.call(Qn).replace($n,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ta(e){if(!L(e)||Jt(e))return!1;var t=we(e)?ea:Yn;return t.test(C(e))}var Xt=ta;function oa(e,t){return e?.[t]}var Zt=oa;function ra(e,t){var o=Zt(e,t);return Xt(o)?o:void 0}var h=ra;var na=h(d,"WeakMap"),Le=na;var Qt=Object.create,aa=function(){function e(){}return function(t){if(!L(t))return{};if(Qt)return Qt(t);e.prototype=t;var o=new e;return e.prototype=void 0,o}}(),eo=aa;function ia(e,t){var o=-1,r=e.length;for(t||(t=Array(r));++o<r;)t[o]=e[o];return t}var to=ia;var sa=function(){try{var e=h(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Ye=sa;function ca(e,t){for(var o=-1,r=e==null?0:e.length;++o<r&&t(e[o],o,e)!==!1;);return e}var oo=ca;var ua=9007199254740991,fa=/^(?:0|[1-9]\d*)$/;function ma(e,t){var o=typeof e;return t=t??ua,!!t&&(o=="number"||o!="symbol"&&fa.test(e))&&e>-1&&e%1==0&&e<t}var ro=ma;function la(e,t,o){t=="__proto__"&&Ye?Ye(e,t,{configurable:!0,enumerable:!0,value:o,writable:!0}):e[t]=o}var ke=la;function da(e,t){return e===t||e!==e&&t!==t}var Ae=da;var pa=Object.prototype,ha=pa.hasOwnProperty;function ga(e,t,o){var r=e[t];(!(ha.call(e,t)&&Ae(r,o))||o===void 0&&!(t in e))&&ke(e,t,o)}var Ce=ga;function xa(e,t,o,r){var a=!o;o||(o={});for(var n=-1,s=t.length;++n<s;){var i=t[n],c=r?r(o[i],e[i],i,o,e):void 0;c===void 0&&(c=e[i]),a?ke(o,i,c):Ce(o,i,c)}return o}var E=xa;var ba=9007199254740991;function ya(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=ba}var Ie=ya;function va(e){return e!=null&&Ie(e.length)&&!we(e)}var Ne=va;var Ta=Object.prototype;function wa(e){var t=e&&e.constructor,o=typeof t=="function"&&t.prototype||Ta;return e===o}var z=wa;function Sa(e,t){for(var o=-1,r=Array(e);++o<e;)r[o]=t(o);return r}var no=Sa;var La="[object Arguments]";function ka(e){return S(e)&&A(e)==La}var Je=ka;var ao=Object.prototype,Aa=ao.hasOwnProperty,Ca=ao.propertyIsEnumerable,Ia=Je(function(){return arguments}())?Je:function(e){return S(e)&&Aa.call(e,"callee")&&!Ca.call(e,"callee")},io=Ia;function Na(){return!1}var so=Na;var fo=typeof exports=="object"&&exports&&!exports.nodeType&&exports,co=fo&&typeof module=="object"&&module&&!module.nodeType&&module,Ma=co&&co.exports===fo,uo=Ma?d.Buffer:void 0,Da=uo?uo.isBuffer:void 0,Ra=Da||so,Me=Ra;var ja="[object Arguments]",Ea="[object Array]",_a="[object Boolean]",Oa="[object Date]",Pa="[object Error]",Ba="[object Function]",Ha="[object Map]",Wa="[object Number]",Ga="[object Object]",Ua="[object RegExp]",Fa="[object Set]",qa="[object String]",Ka="[object WeakMap]",Va="[object ArrayBuffer]",za="[object DataView]",$a="[object Float32Array]",Ya="[object Float64Array]",Ja="[object Int8Array]",Xa="[object Int16Array]",Za="[object Int32Array]",Qa="[object Uint8Array]",ei="[object Uint8ClampedArray]",ti="[object Uint16Array]",oi="[object Uint32Array]",m={};m[$a]=m[Ya]=m[Ja]=m[Xa]=m[Za]=m[Qa]=m[ei]=m[ti]=m[oi]=!0;m[ja]=m[Ea]=m[Va]=m[_a]=m[za]=m[Oa]=m[Pa]=m[Ba]=m[Ha]=m[Wa]=m[Ga]=m[Ua]=m[Fa]=m[qa]=m[Ka]=!1;function ri(e){return S(e)&&Ie(e.length)&&!!m[A(e)]}var mo=ri;function ni(e){return function(t){return e(t)}}var $=ni;var lo=typeof exports=="object"&&exports&&!exports.nodeType&&exports,me=lo&&typeof module=="object"&&module&&!module.nodeType&&module,ai=me&&me.exports===lo,Xe=ai&&Te.process,ii=function(){try{var e=me&&me.require&&me.require("util").types;return e||Xe&&Xe.binding&&Xe.binding("util")}catch{}}(),I=ii;var po=I&&I.isTypedArray,si=po?$(po):mo,ho=si;var ci=Object.prototype,ui=ci.hasOwnProperty;function fi(e,t){var o=V(e),r=!o&&io(e),a=!o&&!r&&Me(e),n=!o&&!r&&!a&&ho(e),s=o||r||a||n,i=s?no(e.length,String):[],c=i.length;for(var l in e)(t||ui.call(e,l))&&!(s&&(l=="length"||a&&(l=="offset"||l=="parent")||n&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||ro(l,c)))&&i.push(l);return i}var De=fi;function mi(e,t){return function(o){return e(t(o))}}var Re=mi;var li=Re(Object.keys,Object),go=li;var di=Object.prototype,pi=di.hasOwnProperty;function hi(e){if(!z(e))return go(e);var t=[];for(var o in Object(e))pi.call(e,o)&&o!="constructor"&&t.push(o);return t}var xo=hi;function gi(e){return Ne(e)?De(e):xo(e)}var Y=gi;function xi(e){var t=[];if(e!=null)for(var o in Object(e))t.push(o);return t}var bo=xi;var bi=Object.prototype,yi=bi.hasOwnProperty;function vi(e){if(!L(e))return bo(e);var t=z(e),o=[];for(var r in e)r=="constructor"&&(t||!yi.call(e,r))||o.push(r);return o}var yo=vi;function Ti(e){return Ne(e)?De(e,!0):yo(e)}var J=Ti;var wi=h(Object,"create"),N=wi;function Si(){this.__data__=N?N(null):{},this.size=0}var vo=Si;function Li(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var To=Li;var ki="__lodash_hash_undefined__",Ai=Object.prototype,Ci=Ai.hasOwnProperty;function Ii(e){var t=this.__data__;if(N){var o=t[e];return o===ki?void 0:o}return Ci.call(t,e)?t[e]:void 0}var wo=Ii;var Ni=Object.prototype,Mi=Ni.hasOwnProperty;function Di(e){var t=this.__data__;return N?t[e]!==void 0:Mi.call(t,e)}var So=Di;var Ri="__lodash_hash_undefined__";function ji(e,t){var o=this.__data__;return this.size+=this.has(e)?0:1,o[e]=N&&t===void 0?Ri:t,this}var Lo=ji;function X(e){var t=-1,o=e==null?0:e.length;for(this.clear();++t<o;){var r=e[t];this.set(r[0],r[1])}}X.prototype.clear=vo;X.prototype.delete=To;X.prototype.get=wo;X.prototype.has=So;X.prototype.set=Lo;var Ze=X;function Ei(){this.__data__=[],this.size=0}var ko=Ei;function _i(e,t){for(var o=e.length;o--;)if(Ae(e[o][0],t))return o;return-1}var _=_i;var Oi=Array.prototype,Pi=Oi.splice;function Bi(e){var t=this.__data__,o=_(t,e);if(o<0)return!1;var r=t.length-1;return o==r?t.pop():Pi.call(t,o,1),--this.size,!0}var Ao=Bi;function Hi(e){var t=this.__data__,o=_(t,e);return o<0?void 0:t[o][1]}var Co=Hi;function Wi(e){return _(this.__data__,e)>-1}var Io=Wi;function Gi(e,t){var o=this.__data__,r=_(o,e);return r<0?(++this.size,o.push([e,t])):o[r][1]=t,this}var No=Gi;function Z(e){var t=-1,o=e==null?0:e.length;for(this.clear();++t<o;){var r=e[t];this.set(r[0],r[1])}}Z.prototype.clear=ko;Z.prototype.delete=Ao;Z.prototype.get=Co;Z.prototype.has=Io;Z.prototype.set=No;var O=Z;var Ui=h(d,"Map"),P=Ui;function Fi(){this.size=0,this.__data__={hash:new Ze,map:new(P||O),string:new Ze}}var Mo=Fi;function qi(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Do=qi;function Ki(e,t){var o=e.__data__;return Do(t)?o[typeof t=="string"?"string":"hash"]:o.map}var B=Ki;function Vi(e){var t=B(this,e).delete(e);return this.size-=t?1:0,t}var Ro=Vi;function zi(e){return B(this,e).get(e)}var jo=zi;function $i(e){return B(this,e).has(e)}var Eo=$i;function Yi(e,t){var o=B(this,e),r=o.size;return o.set(e,t),this.size+=o.size==r?0:1,this}var _o=Yi;function Q(e){var t=-1,o=e==null?0:e.length;for(this.clear();++t<o;){var r=e[t];this.set(r[0],r[1])}}Q.prototype.clear=Mo;Q.prototype.delete=Ro;Q.prototype.get=jo;Q.prototype.has=Eo;Q.prototype.set=_o;var Oo=Q;function Ji(e,t){for(var o=-1,r=t.length,a=e.length;++o<r;)e[a+o]=t[o];return e}var je=Ji;var Xi=Re(Object.getPrototypeOf,Object),Ee=Xi;function Zi(){this.__data__=new O,this.size=0}var Po=Zi;function Qi(e){var t=this.__data__,o=t.delete(e);return this.size=t.size,o}var Bo=Qi;function es(e){return this.__data__.get(e)}var Ho=es;function ts(e){return this.__data__.has(e)}var Wo=ts;var os=200;function rs(e,t){var o=this.__data__;if(o instanceof O){var r=o.__data__;if(!P||r.length<os-1)return r.push([e,t]),this.size=++o.size,this;o=this.__data__=new Oo(r)}return o.set(e,t),this.size=o.size,this}var Go=rs;function ee(e){var t=this.__data__=new O(e);this.size=t.size}ee.prototype.clear=Po;ee.prototype.delete=Bo;ee.prototype.get=Ho;ee.prototype.has=Wo;ee.prototype.set=Go;var Uo=ee;function ns(e,t){return e&&E(t,Y(t),e)}var Fo=ns;function as(e,t){return e&&E(t,J(t),e)}var qo=as;var $o=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ko=$o&&typeof module=="object"&&module&&!module.nodeType&&module,is=Ko&&Ko.exports===$o,Vo=is?d.Buffer:void 0,zo=Vo?Vo.allocUnsafe:void 0;function ss(e,t){if(t)return e.slice();var o=e.length,r=zo?zo(o):new e.constructor(o);return e.copy(r),r}var Yo=ss;function cs(e,t){for(var o=-1,r=e==null?0:e.length,a=0,n=[];++o<r;){var s=e[o];t(s,o,e)&&(n[a++]=s)}return n}var Jo=cs;function us(){return[]}var _e=us;var fs=Object.prototype,ms=fs.propertyIsEnumerable,Xo=Object.getOwnPropertySymbols,ls=Xo?function(e){return e==null?[]:(e=Object(e),Jo(Xo(e),function(t){return ms.call(e,t)}))}:_e,te=ls;function ds(e,t){return E(e,te(e),t)}var Zo=ds;var ps=Object.getOwnPropertySymbols,hs=ps?function(e){for(var t=[];e;)je(t,te(e)),e=Ee(e);return t}:_e,Oe=hs;function gs(e,t){return E(e,Oe(e),t)}var Qo=gs;function xs(e,t,o){var r=t(e);return V(e)?r:je(r,o(e))}var Pe=xs;function bs(e){return Pe(e,Y,te)}var er=bs;function ys(e){return Pe(e,J,Oe)}var tr=ys;var vs=h(d,"DataView"),Be=vs;var Ts=h(d,"Promise"),He=Ts;var ws=h(d,"Set"),We=ws;var or="[object Map]",Ss="[object Object]",rr="[object Promise]",nr="[object Set]",ar="[object WeakMap]",ir="[object DataView]",Ls=C(Be),ks=C(P),As=C(He),Cs=C(We),Is=C(Le),G=A;(Be&&G(new Be(new ArrayBuffer(1)))!=ir||P&&G(new P)!=or||He&&G(He.resolve())!=rr||We&&G(new We)!=nr||Le&&G(new Le)!=ar)&&(G=function(e){var t=A(e),o=t==Ss?e.constructor:void 0,r=o?C(o):"";if(r)switch(r){case Ls:return ir;case ks:return or;case As:return rr;case Cs:return nr;case Is:return ar}return t});var oe=G;var Ns=Object.prototype,Ms=Ns.hasOwnProperty;function Ds(e){var t=e.length,o=new e.constructor(t);return t&&typeof e[0]=="string"&&Ms.call(e,"index")&&(o.index=e.index,o.input=e.input),o}var sr=Ds;var Rs=d.Uint8Array,Qe=Rs;function js(e){var t=new e.constructor(e.byteLength);return new Qe(t).set(new Qe(e)),t}var re=js;function Es(e,t){var o=t?re(e.buffer):e.buffer;return new e.constructor(o,e.byteOffset,e.byteLength)}var cr=Es;var _s=/\w*$/;function Os(e){var t=new e.constructor(e.source,_s.exec(e));return t.lastIndex=e.lastIndex,t}var ur=Os;var fr=k?k.prototype:void 0,mr=fr?fr.valueOf:void 0;function Ps(e){return mr?Object(mr.call(e)):{}}var lr=Ps;function Bs(e,t){var o=t?re(e.buffer):e.buffer;return new e.constructor(o,e.byteOffset,e.length)}var dr=Bs;var Hs="[object Boolean]",Ws="[object Date]",Gs="[object Map]",Us="[object Number]",Fs="[object RegExp]",qs="[object Set]",Ks="[object String]",Vs="[object Symbol]",zs="[object ArrayBuffer]",$s="[object DataView]",Ys="[object Float32Array]",Js="[object Float64Array]",Xs="[object Int8Array]",Zs="[object Int16Array]",Qs="[object Int32Array]",ec="[object Uint8Array]",tc="[object Uint8ClampedArray]",oc="[object Uint16Array]",rc="[object Uint32Array]";function nc(e,t,o){var r=e.constructor;switch(t){case zs:return re(e);case Hs:case Ws:return new r(+e);case $s:return cr(e,o);case Ys:case Js:case Xs:case Zs:case Qs:case ec:case tc:case oc:case rc:return dr(e,o);case Gs:return new r;case Us:case Ks:return new r(e);case Fs:return ur(e);case qs:return new r;case Vs:return lr(e)}}var pr=nc;function ac(e){return typeof e.constructor=="function"&&!z(e)?eo(Ee(e)):{}}var hr=ac;var ic="[object Map]";function sc(e){return S(e)&&oe(e)==ic}var gr=sc;var xr=I&&I.isMap,cc=xr?$(xr):gr,br=cc;var uc="[object Set]";function fc(e){return S(e)&&oe(e)==uc}var yr=fc;var vr=I&&I.isSet,mc=vr?$(vr):yr,Tr=mc;var lc=1,dc=2,pc=4,wr="[object Arguments]",hc="[object Array]",gc="[object Boolean]",xc="[object Date]",bc="[object Error]",Sr="[object Function]",yc="[object GeneratorFunction]",vc="[object Map]",Tc="[object Number]",Lr="[object Object]",wc="[object RegExp]",Sc="[object Set]",Lc="[object String]",kc="[object Symbol]",Ac="[object WeakMap]",Cc="[object ArrayBuffer]",Ic="[object DataView]",Nc="[object Float32Array]",Mc="[object Float64Array]",Dc="[object Int8Array]",Rc="[object Int16Array]",jc="[object Int32Array]",Ec="[object Uint8Array]",_c="[object Uint8ClampedArray]",Oc="[object Uint16Array]",Pc="[object Uint32Array]",f={};f[wr]=f[hc]=f[Cc]=f[Ic]=f[gc]=f[xc]=f[Nc]=f[Mc]=f[Dc]=f[Rc]=f[jc]=f[vc]=f[Tc]=f[Lr]=f[wc]=f[Sc]=f[Lc]=f[kc]=f[Ec]=f[_c]=f[Oc]=f[Pc]=!0;f[bc]=f[Sr]=f[Ac]=!1;function Ge(e,t,o,r,a,n){var s,i=t&lc,c=t&dc,l=t&pc;if(o&&(s=a?o(e,r,a,n):o(e)),s!==void 0)return s;if(!L(e))return e;var de=V(e);if(de){if(s=sr(e),!i)return to(e,s)}else{var M=oe(e),ne=M==Sr||M==yc;if(Me(e))return Yo(e,i);if(M==Lr||M==wr||ne&&!a){if(s=c||ne?{}:hr(e),!i)return c?Qo(e,qo(s,e)):Zo(e,Fo(s,e))}else{if(!f[M])return a?e:{};s=pr(e,M,i)}}n||(n=new Uo);var ae=n.get(e);if(ae)return ae;n.set(e,s),Tr(e)?e.forEach(function(w){s.add(Ge(w,t,o,w,e,n))}):br(e)&&e.forEach(function(w,W){s.set(W,Ge(w,t,o,W,e,n))});var pe=l?c?tr:er:c?J:Y,H=de?void 0:pe(e);return oo(H||e,function(w,W){H&&(W=w,w=e[W]),Ce(s,W,Ge(w,t,o,W,e,n))}),s}var kr=Ge;var Bc=1,Hc=4;function Wc(e){return kr(e,Bc|Hc)}var et=Wc;function b(e){return et(e)}function Ar(e){let t=K(()=>e());return Uc(t)?new Proxy(e,{get(o,r){return r in t?(gt(o[r])||Object.defineProperty(o,r,{value:D(()=>o()[r]),configurable:!0}),Ar(o[r])):o[r]}}):e}var Gc=[WeakSet,WeakMap,Promise,Date,Error,RegExp,ArrayBuffer,DataView,Function];function Uc(e){if(e===null||typeof e!="object"||Fc(e))return!1;let t=Object.getPrototypeOf(e);if(t===Object.prototype)return!0;for(;t&&t!==Object.prototype;){if(Gc.includes(t.constructor))return!1;t=Object.getPrototypeOf(t)}return t===Object.prototype}function Fc(e){return typeof e?.[Symbol.iterator]=="function"}var qc=new WeakMap,y=Symbol("STATE_SOURCE");function v(e,...t){e[y].update(o=>t.reduce((r,a)=>u(u({},r),typeof a=="function"?a(r):a),o)),zc(e)}function Kc(e){return e[y]()}function Vc(e){return qc.get(e[y])||[]}function zc(e){let t=Vc(e);for(let o of t){let r=K(()=>Kc(e));o(r)}}function Cr(...e){let t=[...e],o=typeof t[0]=="function"?{}:t.shift(),r=t;return(()=>{class n{constructor(){let i=r.reduce((H,w)=>w(H),$c()),{stateSignals:c,props:l,methods:de,hooks:M}=i,ne=u(u(u({},c),l),de);this[y]=i[y];for(let H of Reflect.ownKeys(ne))this[H]=ne[H];let{onInit:ae,onDestroy:pe}=M;ae&&ae(),pe&&ie(q).onDestroy(pe)}static \u0275fac=function(c){return new(c||n)};static \u0275prov=ht({token:n,factory:n.\u0275fac,providedIn:o.providedIn||null})}return n})()}function $c(){return{[y]:se({}),stateSignals:{},props:{},methods:{},hooks:{}}}function Yc(e){return t=>{let o=e(u(u(u({[y]:t[y]},t.stateSignals),t.props),t.methods));return Reflect.ownKeys(o),T(u({},t),{props:u(u({},t.props),o)})}}function Ir(e){return Yc(e)}function Nr(e){return t=>{let o=e(u(u(u({[y]:t[y]},t.stateSignals),t.props),t.methods));return Reflect.ownKeys(o),T(u({},t),{methods:u(u({},t.methods),o)})}}function Mr(e){return t=>{let o=typeof e=="function"?e():e,r=Reflect.ownKeys(o);t[y].update(n=>u(u({},n),o));let a=r.reduce((n,s)=>{let i=D(()=>t[y]()[s]);return T(u({},n),{[s]:Ar(i)})},{});return T(u({},t),{stateSignals:u(u({},t.stateSignals),a)})}}function Jc(e){return{streets:e.withStreets(),districts:e.withDistricts()}}function Dr(e){return()=>Jc(e)}function Zc(e){return{mapTileType:"S",type:e.withType(),location:e.withLocation()}}function Qc(e){return()=>Zc(e)}function Rr(...e){return()=>e.map(t=>t())}function U(e){return Qc({withType:()=>e.type,withLocation:()=>p({name:e.name,connections:e.connections})})()}function jr(e){return U({name:"Residential1",type:"R",connections:[...e()]})}function Er(e){return U({name:"Residential2",type:"R",connections:[...e()]})}function _r(e){return U({name:"Residential3",type:"R",connections:[...e()]})}function Or(e){return U({name:"Bridge1",type:"B",connections:[...e()]})}function Pr(e){return U({name:"Bridge2",type:"B",connections:[...e()]})}function Br(e){return U({name:"Scenic1",type:"S",connections:[...e()]})}function Hr(e){return U({name:"Scenic2",type:"S",connections:[...e()]})}var eu=(r=>(r.Ready="Ready",r.Exhausted="Exhausted",r.Engaged="Engaged",r))(eu||{});function tu(e){return{cardType:"MO",id:g(),name:e.withName(),state:e.withState(),speed:e.withSpeed(),tags:e.withTags(),spawn:e.withSpawnLocation(),activate:e.withActivate(),remnant:e.withRemnant(),health:e.withHealth(),attackModifier:e.withAttackModifier(),evadeModifier:e.withEvadeModifier(),damage:e.withDamage(),horror:e.withHorror(),engagedInvestigators:e.withEngagedInvestigators(),moved:!1,attacked:!1,exhausted:!1,engaged:!1}}function Wr(e){return()=>tu(e)}function tt(e){return x(e).flatMap(t=>t.monsters)}function Gr(e,t){let o=Tt(e),r=vt(e,t),a=[],n=9999;if(o.forEach(i=>{let c=ye({board:e,startName:r.name,endName:i.name});c.length<n&&(a=c)}),a.length<1)return;let s=a.filter((i,c)=>c<=t.speed).map(i=>R(e,i)).find((i,c,l)=>c===l.length-1||i.investigators.length);if(!s)throw new Error("Missing location");r.monsters=r.monsters.filter(i=>i.id!==t.id),s.monsters.push(t),t.moved=!0}function Ue(){return Wr({withName:()=>"Swift Byakhee",withState:()=>"Ready",withSpeed:()=>3,withTags:()=>["Monster","Byakhee"],withSpawnLocation:()=>e=>R(e.board,e.startLocation),withActivate:()=>({type:"Patrol",engages:"min",skill:"influence"}),withRemnant:()=>!0,withHealth:()=>2,withAttackModifier:()=>-1,withEvadeModifier:()=>0,withDamage:()=>1,withHorror:()=>1,withEngagedInvestigators:()=>[]})()}function Ur(){return Wr({withName:()=>"Eyeless Watcher",withState:()=>"Ready",withSpeed:()=>2,withTags:()=>["Monster","Cultist"],withSpawnLocation:()=>e=>R(e.board,e.startLocation),withActivate:()=>({type:"Patrol",engages:"min",skill:"influence"}),withRemnant:()=>!0,withHealth:()=>2,withAttackModifier:()=>-1,withEvadeModifier:()=>0,withDamage:()=>1,withHorror:()=>1,withEngagedInvestigators:()=>[]})()}function ou(e){return{tokenType:"MY",type:e.withType(),id:g()}}function F(e){return()=>ou(e)}function Fr(...e){return()=>e.map(t=>t())}function qr(e){return be(e).pop()}function Fe(){return F({withType:()=>"Spread Doom"})()}function ot(){return F({withType:()=>"Spawn Monster"})()}function rt(){return F({withType:()=>"Read Headline"})()}function nt(){return F({withType:()=>"Spawn Clue"})()}function Kr(){return F({withType:()=>"Gate Burst"})()}function Vr(){return F({withType:()=>"Reckoning"})()}function qe(){return F({withType:()=>"Blank"})()}function ru(e){return{cardType:"LO",locationType:"N",id:e.withId(),neighbourhoodName:e.withNeighbourhoodName(),encounters:e.withEncounters()}}function nu(e){return()=>ru(e)}function zr(){return nu({withId:()=>1,withNeighbourhoodName:()=>"Northside",withEncounters:()=>new Map})()}function au(e){return{cardType:"AR",name:e.withName()}}function iu(e){return()=>au(e)}function $r(){return iu({withName:()=>"Outbreak"})()}function su(e){return{name:e.withName(),board:e.withBoard(),eventDeck:e.withEventDeck(),monstersDeck:e.withMonstersDeck(),archive:e.withArchive(),mythosCup:e.withMythosCup(),startLocation:e.withStartLocation(),drawnMythosTokens:[]}}function cu(e){return()=>su(e)}function Yr(){return cu({withName:()=>"Sandbox Game",withStartLocation:()=>"Train Station",withArchive:j($r),withMonstersDeck:j(Ue,Ur),withEventDeck:j(zr),withMythosCup:Fr(Fe,Fe,Fe,ot,ot,nt,nt,rt,rt,Kr,Vr,qe,qe,qe),withBoard:Dr({withDistricts:uu,withStreets:Rr(()=>jr(()=>["Independence Square","La Bella Luna","Velma's Dinner","Police Station"]),()=>Er(()=>["Arkham Asylum","La Bella Luna","Unvisited Isle"]),()=>_r(()=>["Unvisited Isle","Tic-Toc Club","Black Cave","General Store"]),()=>Or(()=>["La Bella Luna","Black Cave"]),()=>Pr(()=>["Police Station","Black Cave","Graveyard"]),()=>Br(()=>["Arkham Advertiser","Train Station","Arkham Asylum"]),()=>Hr(()=>["Train Station","Unvisited Isle","River Docks"]))})})()}function uu(){return Ht(fu,mu,lu,du,pu)()}function fu(){return Wt({trainStation:()=>["Scenic1","Scenic2"],curiositieShoppe:()=>[],arkhamAdvertiser:()=>["Scenic1"]},{doom:{arkhamAdvertiser:()=>1},unstable:{trainStation:()=>!0}})}function mu(){return Gt({policeStation:()=>["Residential1","Bridge2"],velmasDinner:()=>["Residential1"],hibbsRoadhouse:()=>[]},{doom:{velmasDinner:()=>1},monsters:{hibbsRoadhouse:()=>[Ue()]}})}function lu(){return Ut({arkhamAsylum:()=>["Scenic1","Residential2"],independenceSquare:()=>["Residential1"],laBellaLuna:()=>["Residential1","Residential2","Bridge1"]},{doom:{independenceSquare:()=>1}})}function du(){return Ft({unvisitedIsle:()=>["Scenic2","Residential2","Residential3"],riverDocks:()=>["Scenic2"],ticTocClub:()=>["Residential3"]},{doom:{unvisitedIsle:()=>1}})}function pu(){return qt({graveyard:()=>["Bridge2"],blackCave:()=>["Bridge1","Bridge2","Residential3"],generalStore:()=>["Residential3"]},{doom:{blackCave:()=>1},monsters:{graveyard:()=>[Ue()]}})}function hu(e){return{name:e.withName(),health:e.withHealth(),sanity:e.withSanity(),lore:e.withLore(),currentLore:e.withLore(),influence:e.withInfluence(),observation:e.withObservation(),strength:e.withStrength(),will:e.withWill()}}function gu(e){return()=>hu(e)}function Jr(){return gu({withName:()=>"Daniela Reyes",withHealth:()=>7,withSanity:()=>5,withLore:()=>3,withInfluence:()=>3,withObservation:()=>1,withStrength:()=>3,withWill:()=>3})()}function Ke(){return{tokenType:"MO",id:g()}}function xu(e){return{tokenType:"IN",name:e.withName(),investigatorSheet:e.withInvestigatorSheet(),player:e.withPlayer(),id:g(),dollars:e.withDollars(),actionsLeft:3,moveNormal:2,moveDone:0,tokensDrawn:0,remnants:[],engagedMonstersIds:[]}}function bu(e){return()=>xu(e)}function Xr(e,t){if(t.player.name)throw console.error("Investigator already have player attached!"),new Error("Investigator already have player attached!");return T(u({},t),{player:e()})}function at(e,t){return yu(e).find(o=>t===o.name)}function yu(e){return x(e).flatMap(t=>t.investigators)}function Zr(e){return bu({withName:()=>"Daniela Reyes",withInvestigatorSheet:Jr,withPlayer:e,withDollars:ge(Ke,3)})()}function vu(e){return{cardType:"HE"}}function Tu(e){return()=>vu(e)}function Qr(){let e=j(Tu({cardType:"HE"}))();return Pt(e,6)}function Su(e){return{scenario:e.withScenario(),investigators:e.withInvestigators(),headlineDeck:e.withHeadlineDeck(),currentRound:1,currentPhase:"Action Phase"}}var en=JSON.parse(sessionStorage.getItem("hwa_game")??"null")??Su({withScenario:Yr,withInvestigators:()=>[Zr(xt({withName:()=>""}))],withHeadlineDeck:Qr});function tn(...e){return e.map(t=>{let o=t();return{result:o.throw().result,minToSuccess:o.minToSuccess}})}function on(e){let t=tn(...e.withDices),o=t.filter(a=>a.result>=a.minToSuccess).length,r=o>0;return{throwsStatus:t,successCount:o,passed:r}}function Lu(e){return{sides:e.withSides(),minToSuccess:e.withMinToSuccess(),throw:e.withThrow()}}function ku(e){return()=>Lu(e)}function Au(e=5){return ku({withSides:()=>6,withMinToSuccess:()=>e,withThrow:()=>()=>({result:Math.floor(Math.random()*6)+1,minToSuccess:e})})()}function rn(e){return()=>Au(e)}function nn(){return{tokenType:"RE",id:g()}}function Cu(e){return{actionType:"I",name:e.withName(),run:e.withRun()}}function it(e){return()=>Cu(e)}function le(e){e.actionsLeft=Math.max(e.actionsLeft-1,0),e.moveDone=0,console.log("endAction","left",e.actionsLeft)}function an(){return it({withName:()=>"Move",withRun:()=>e=>{let{board:t,destination:o,withCondition:r,stopCondition:a,investigator:n}=e;if(n.actionsLeft<1&&!e.force)return{runEndsWith:"notExecuted",message:"No actions left!",board:t};let s=ce(t,n),i=ye({board:t,startName:s.name,endName:o,withCondition:r,stopCondition:a});return i.length===1&&n.moveDone>0&&le(n),i.length!==2?{runEndsWith:"notExecuted",message:"You can move only one location!",board:t}:(s.investigators=s.investigators.filter(l=>l.name!==n.name),R(t,o).investigators.push(n),n.moveDone=n.moveDone+1,n.moveDone>n.moveNormal&&(n.dollars.pop(),console.log("paid move","left",n.dollars.length)),(n.moveDone>3||n.moveDone>=n.moveNormal&&n.moveDone<4&&n.dollars.length<1)&&le(n),{runEndsWith:"success",message:e.force?"Move forced":"Normal move",board:t})}})()}function sn(){return it({withName:()=>"Ward",withRun:()=>e=>{let{board:t,investigator:o}=e;if(o.actionsLeft<1)return{runEndsWith:"notExecuted",message:"No actions left!",board:t};if(o.moveDone>0)return{runEndsWith:"notExecuted",message:"End move action first!",board:t};let r=ce(t,o),a=[];for(let l=0;l<o.investigatorSheet.currentLore;l++)a.push(rn());let n=on({withDices:a});if(console.log("wardAction testResults",n),!n.passed)return le(o),{runEndsWith:"failure",message:"You failed to ward doom tokens!",board:t};let s=n.successCount,i=r.doom,c=s>1&&i.length>1;return i.splice(0,s),c&&o.remnants.push(nn()),console.log("wardAction remnantReward",c),le(o),{runEndsWith:"success",board:t}}})()}function cn(){return it({withName:()=>"Gather Resources",withRun:()=>e=>{let{board:t,investigator:o}=e;return o.actionsLeft<1?{runEndsWith:"notExecuted",message:"No actions left!",board:t}:o.moveDone>0?{runEndsWith:"notExecuted",message:"End move action first!",board:t}:(o.dollars.push(Ke()),le(o),{runEndsWith:"success",board:t})}})()}var Vx=Cr({providedIn:"root"},Mr({game:en}),Nr(e=>({addPlayer(t,o){let r=Xr(t,o);return v(e,a=>{let n=a.game.investigators.map(s=>s.name!==o.name?s:r);return{game:T(u({},b(a.game)),{investigators:n})}}),r},placePlayersOnStartLocation(){v(e,t=>{let o=[],r=[];t.game.investigators.forEach(n=>{n.player.name?o.push(n):r.push(n)});let a=R(t.game.scenario.board,t.game.scenario.startLocation);return a.investigators.push(...o),console.log(a.investigators),t.game.activeInvestigator=a.investigators[0],{game:T(u({},b(t.game)),{investigators:r})}})},move(t,o){let r=e.game(),a=r.activeInvestigator;if(!a)return;let n=an().run({board:r.scenario.board,investigator:a,destination:t,force:o?.force});console.log("move ActionStatus",n),a.actionsLeft<1&&(r.currentPhase="Monster Phase"),v(e,s=>b(s))},patrol(t){let o=e.game();Gr(o.scenario.board,t),v(e,r=>b(r))},ward(t){let o=e.game(),r=o.activeInvestigator;if(!r||!ce(o.scenario.board,r).doom.find(s=>s.id===t))return;let n=sn().run({board:o.scenario.board,investigator:r});console.log("ward ActionStatus",n),r.actionsLeft<1&&(o.currentPhase="Monster Phase"),v(e,s=>b(s))},gatherResources(){let t=e.game(),o=t.activeInvestigator;if(!o)return;let r=cn().run({board:t.scenario.board,investigator:o});console.log("gatherResources ActionStatus",r),o.actionsLeft<1&&(t.currentPhase="Monster Phase"),v(e,a=>b(a))},engage(t){tt(e.game.scenario.board()).find(o=>o.id===t.id).engaged=!0,console.log(t),v(e,o=>b(o))},nextPhase(t){let o=e.game();switch(o.currentPhase=t,console.log("nextPhase",t),t){case"Action Phase":o.currentRound+=1;break;default:break}v(e,r=>b(r))},drawFromMythosCup(t){let o=e.game();o.scenario.mythosCup.length<1&&(o.scenario.mythosCup=[...o.scenario.drawnMythosTokens],o.scenario.drawnMythosTokens=[]);let r=qr(o.scenario.mythosCup);if(!r)throw new Error("MythosToken not found!");o.scenario.drawnMythosTokens.push(r);let a=at(o.scenario.board,t);if(!a)throw new Error("InvestigatorToken does not exist!");return a.tokensDrawn+=1,v(e,n=>b(n)),r},restoreActions(t){let o=e.game(),r=at(o.scenario.board,t);if(!r)throw new Error("InvestigatorToken does not exist!");r.actionsLeft=3,v(e,a=>b(a))},restoreMonsters(){let t=e.game();tt(t.scenario.board).forEach(r=>{r.moved=!1}),v(e,r=>b(r))}})),Ir(e=>{let t=D(()=>!x(e.game.scenario.board()).flatMap(a=>a.monsters).some(a=>!a.moved)),o=D(()=>t()?!x(e.game.scenario.board()).flatMap(a=>a.monsters).some(a=>!a.engaged):!1);return{allMonstersMoved:t,allMonstersEngaged:o}}));function st(e,t){!t?.injector&&he(st);let o=t?.injector??ie(ze),r=new ut(1),a=$e(()=>{let n;try{n=e()}catch(s){K(()=>r.error(s));return}K(()=>r.next(n))},{injector:o,manualCleanup:!0});return o.get(q).onDestroy(()=>{a.destroy(),r.complete()}),r.asObservable()}function ct(e,t){let o=!t?.manualCleanup;o&&!t?.injector&&he(ct);let r=o?t?.injector?.get(q)??ie(q):null,a=Iu(t?.equal),n;t?.requireSync?n=se({kind:0},{equal:a}):n=se({kind:1,value:t?.initialValue},{equal:a});let s=e.subscribe({next:i=>n.set({kind:1,value:i}),error:i=>{if(t?.rejectErrors)throw i;n.set({kind:2,error:i})}});if(t?.requireSync&&n().kind===0)throw new Ve(601,!1);return r?.onDestroy(s.unsubscribe.bind(s)),D(()=>{let i=n();switch(i.kind){case 1:return i.value;case 2:throw i.error;case 0:throw new Ve(601,!1)}},{equal:t?.equal})}function Iu(e=Object.is){return(t,o)=>t.kind===1&&o.kind===1&&e(t.value,o.value)}function ub(e){let t,o;return ct(st(e.params).pipe(lt(r=>r!==void 0),dt(r=>{let a=e.computation({methodParams:r,previousMethodParams:o,previousMethodValue:t});return mt(a)?a:ft(a)}),pt(r=>{t=r,o=e.params()})),{rejectErrors:!0})}export{xt as a,R as b,eu as c,b as d,Vx as e,ub as f};
